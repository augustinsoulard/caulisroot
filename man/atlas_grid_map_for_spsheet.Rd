% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/atlas_grid_map_for_spsheet.R
\name{atlas_grid_map_for_spsheet}
\alias{atlas_grid_map_for_spsheet}
\title{Cartes OSM centrées sur une emprise unique (une carte par espèce)}
\usage{
atlas_grid_map_for_spsheet(
  atlas_polys,
  lb_nom,
  focus = NULL,
  export = FALSE,
  file_chose = FALSE,
  out_dir = NULL,
  filename_fmt = "{species}_atlas.png",
  width_px = 1600,
  height_px = 1200,
  dpi = 200,
  basemap = "osm",
  basemap_alpha = 0.5,
  fill = "#2C7FB8",
  fill_alpha = 0.35,
  border_col = "black",
  border_size = 0.5,
  extent_source = c("atlas", "points", "custom"),
  points_sf = NULL,
  extent_custom = NULL,
  extent_crs = 4326,
  margin_km = 1,
  crs_basemap = 3857
)
}
\arguments{
\item{atlas_polys}{sf POLYGON/MULTIPOLYGON (sortie de `crible_point_to_atlas_grid`), contenant au moins une colonne espèce.}

\item{lb_nom}{Colonne espèce, en *tidy-eval* non quotée (ex. `lb_nom = espece`).}

\item{focus}{Vecteur d'espèces à cartographier (caractères). `NULL` = toutes les espèces présentes.}

\item{export}{`TRUE` pour exporter des PNG, `FALSE` pour renvoyer seulement les objets `ggplot`.}

\item{file_chose}{`TRUE` pour ouvrir un dialogue de fichier et récupérer le dossier (ignoré si `out_dir` non‐NULL ou si session non interactive).}

\item{out_dir}{Dossier de sortie. Si `NULL` et `file_chose = TRUE`, choisi via dialogue ; sinon `getwd()`.}

\item{filename_fmt}{Modèle du nom de fichier. Utiliser `{species}` qui sera remplacé par un *slug* du nom d'espèce (ex. `"{species}_atlas.png"`).}

\item{width_px, height_px, dpi}{Dimensions d'export en pixels et résolution (ppi). La taille en pouces est calculée comme `width_px / dpi` et `height_px / dpi`.}

\item{basemap}{Type de tuiles pour `ggspatial::annotation_map_tile` (ex. `"osm"`). Mettre `NULL` pour ne pas afficher de fond.}

\item{basemap_alpha}{Opacité (0–1) appliquée au fond de carte (par défaut `0.5`).}

\item{fill, fill_alpha, border_col, border_size}{Style des polygones des mailles (couleur de remplissage, opacité, couleur/épaisseur de bord).}

\item{extent_source}{Source de l'emprise unique utilisée pour toutes les cartes : `"atlas"` (défaut, union des mailles), `"points"` (d'après `points_sf`), ou `"custom"`.}

\item{points_sf}{Objet `sf` de géométrie POINT/MULTIPOINT utilisé si `extent_source = "points"`. Doit avoir un CRS défini.}

\item{extent_custom}{Emprise personnalisée si `extent_source = "custom"` : soit un objet `sf/sfc` (n'importe quelle géométrie), soit un vecteur numérique `c(xmin, ymin, xmax, ymax)`.}

\item{extent_crs}{EPSG de `extent_custom` quand celui-ci est un vecteur numérique (défaut `4326`).}

\item{margin_km}{Marge (km) tampon ajoutée autour de l'emprise unique.}

\item{crs_basemap}{EPSG utilisé pour la carte et le fond (par défaut `3857`, Web Mercator).}
}
\value{
`list(plots = <liste nommée de ggplot par espèce>, files = <chemins des PNG exportés si export = TRUE>)`
}
\description{
Cartes OSM centrées sur une emprise unique (une carte par espèce)
}
